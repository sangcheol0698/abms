# 커밋 컨벤션 요약 (Conventional Commits)

가독성을 위해 최소 규칙만 사용합니다.

## 형식

- 헤더: `type(scope)!: subject`
    - type: 변경 성격
    - scope: 변경 범위(소문자/슬래시) — 예) `domain/employee`, `api`, `docs`, `build`
    - !: 비호환(브레이킹) 변경 표시
    - subject: 한 줄 요약(명령형, 50자 이내, 마침표 X)
- 본문(선택): 무엇/왜 변경했는지
- 푸터(선택): 이슈/티켓, BREAKING CHANGE 상세

## 타입

- feat: 기능 추가
- fix: 버그 수정
- docs: 문서 변경
- refactor: 리팩터링(동작 불변)
- test: 테스트 추가/수정
- build: 빌드/의존성/도구 변경
- ci: CI 변경
- chore: 기타 잡무
- perf: 성능 개선
- revert: 되돌리기

## 브레이킹 체인지

- 의미: 업그레이드 시 기존 사용자가 수정 없이 동작하지 않는 비호환 변경
- 표기: 헤더 `!` 또는 푸터 `BREAKING CHANGE: ...`(둘 다 가능)
- 예: 공개 API 시그니처 변경/삭제, 필수 필드 추가/제거, 설정 키 변경 등

## 예시

```
feat(domain/employee): Email 값 객체 검증 추가

검증 정밀도를 높여 잘못된 이메일을 조기 차단.
Closes #123
```

```
fix(api): 직원 생성 시 생년월일 파싱 오류 수정
```

```
feat(api)!: v1 삭제 엔드포인트 제거

BREAKING CHANGE: 클라이언트는 v2 엔드포인트로 마이그레이션 필요.
```

---

## 추가 예시 모음

### feat (기능)

```
feat(api): 직원 조회에 페이징 파라미터 추가(page,size)
```

```
feat(domain/employee): EmployeePosition에 description 게터 추가
```

```
feat(web): 프로필 이미지 업로드 지원 (PNG/JPEG)

업로드 최대 5MB 제한 및 MIME 타입 검증 추가.
Refs ABMS-204
```

### fix (버그)

```
fix(domain): Email 검증에서 연속 점 허용 버그 수정
```

```
fix(api): /employees/{id} 404 시 예외 매핑 개선 (Problem+JSON)
```

```
fix(build): JDK 21에서 Error Prone 플러그인 인식 안되던 문제 해결
```

### docs (문서)

```
docs: NullAway Gradle 가이드 추가 및 예시 확장
```

```
docs(adr): 이메일 검증 정규식 선택 근거 기록(ADR-0005)
```

### refactor (리팩터링)

```
refactor(domain): BaseEntity 시간대 의존 제거 및 메서드 추출
```

```
refactor(api): EmployeeController 핸들러 메서드 분리
```

### perf (성능)

```
perf(repo): 직원 목록 조회에 배치 페치 크기 조정(100→500)
```

```
perf(cache): 직급/등급 상수 테이블 캐싱 추가 (TTL 24h)
```

### test (테스트)

```
test(domain/employee): Email 유효/무효 케이스 대량 추가
```

```
test(api): 직원 CRUD 통합 테스트 추가(MockMvc)
```

### build (빌드/의존성)

```
build(gradle): Error Prone+NullAway 적용 및 옵션 정리
```

```
build(deps): Spring Boot 3.5.4로 업그레이드
```

```
build(docker): compose.yaml에 MySQL 8.4 추가
```

### ci (CI)

```
ci(github): PR 빌드에 테스트 캐시 활성화 및 JDK 21 매트릭스 추가
```

```
ci: main에 머지 시 자동 릴리스 노트 생성
```

### chore (잡무)

```
chore: .editorconfig 정렬 및 코드 포맷 적용
```

```
chore(deps): 플러그인/라이브러리 취약점 패치 버전 적용
```

### revert (되돌리기)

```
revert: "feat(api)!: v1 삭제 엔드포인트 제거" 되돌림

외부 파트너 호환성 이슈로 롤백.
Reverts commit 1a2b3c4d.
```

### BREAKING CHANGE 상세 예시

```
feat(domain)!: EmployeeStatus 값을 변경 (ON_LEAVE→LEAVE)

BREAKING CHANGE: DB enum 매핑도 업데이트 필요. 마이그레이션 스크립트 제공.
- 코드: EmployeeStatus.ON_LEAVE → EmployeeStatus.LEAVE
- DB: employee.status 'ON_LEAVE' → 'LEAVE'
```

```
refactor(api)!: 직원 검색 파라미터 이름 변경(q→keyword)

BREAKING CHANGE: 클라이언트 요청 파라미터를 keyword로 교체해야 함.
```

### 영어 예시

```
feat(api): add pagination to employee search endpoint
```

```
fix(domain): disallow consecutive dots in email local-part
```

```
feat(api)!: drop v1 endpoints

BREAKING CHANGE: migrate clients to /api/v2/* routes.
```

### 스코프 예시

- domain, domain/employee, domain/common
- api, web, app
- infra, build, ci, deps, docker
- docs, examples, adr

> 필요 시 팀 합의로 스코프/타입을 확장하고, 본 문서에 예시를 추가하세요.